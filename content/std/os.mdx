---
title: os
---

# os

## os.main

### 概述
os 模块提供了操作系统相关的基础功能，包括文件系统操作、进程信息获取等功能。

### 函数

#### args()
获取命令行参数列表。

```nature
fn args():[string]
```

#### exe()
获取当前可执行文件的路径。通过读取 /proc/self/exe 链接实现。

```nature
fn exe():string!
```

#### listdir()
列出指定目录下的所有文件和目录名称。返回的列表是经过排序的。

```nature
fn listdir(string path):[string]!
```

#### mkdirs()
递归创建目录。如果目录已存在，则不进行操作。

```nature
fn mkdirs(string dir, u32 mode):void!
```

#### remove()
删除指定的文件。如果文件不存在，则不进行操作。

```nature
fn remove(string full_path):void!
```

#### rmdir()
删除目录。当 recursive 为 true 时，递归删除目录及其内容。

```nature
fn rmdir(string dir, bool recursive):void!
```

### 使用示例

```nature
import os

fn main() {
    // 获取命令行参数
    var args = os.args()
    
    // 创建目录
    os.mkdirs("./test/subdir", 0755) catch err {
        // 处理错误
    }
    
    // 列出目录内容
    var files = os.listdir("./test") catch err {
        // 处理错误
    }
    
    // 删除文件和目录
    os.remove("./test/file.txt") catch err {}
    os.rmdir("./test", true) catch err {}
}
```

## os.signal

### 概述
signal 模块提供了信号处理相关的功能，用于处理操作系统信号。需要通过 `import os.signal` 引入。

### 类型

#### sig_t
信号类型的别名。

```nature
type sig_t = int
```

### 函数

#### notify()
注册信号处理器，将指定的信号发送到通道。

```nature
fn notify(chan<sig_t> sig_ch, ...[int] signals)
```

#### stop()
停止信号处理器，不再向通道发送信号。

```nature
fn stop(chan<sig_t> sig_ch)
```

### 使用示例

```nature
import os.signal

fn main() {
    var sig_ch = chan<signal.sig_t>{}
    
    // 注册信号处理
    signal.notify(sig_ch, SIGINT, SIGTERM)
    
    // 等待信号
    var sig = <-sig_ch
    
    // 停止信号处理
    signal.stop(sig_ch)
}
```
